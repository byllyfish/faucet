FROM faucet/faucet-testbase:latest

RUN pip3 install networkx pyyaml aiohttp prometheus_client influxdb couchdb bitstring pbr requests \
    && cd /root \
    && git clone -b develop --single-branch --depth=1 https://github.com/byllyfish/zof.git \
    && git clone -b port5 --single-branch --depth=1 https://github.com/byllyfish/faucet.git \
    && cd /root/zof \
    && python3 setup.py develop \
    && pip3 install -U chardet \
    && cd /root/faucet \
    && python3 setup.py develop

RUN pip2 install ipaddress pyyaml concurrencytest packaging netifaces requests scapy exabgp psutil

CMD ["/root/faucet/docker/zof-runtests.sh"]
